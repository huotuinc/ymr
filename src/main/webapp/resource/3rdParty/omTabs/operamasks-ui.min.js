(function(a,d){a.om=a.om||{};if(a.om.version){return}a.extend(a.om,{version:"2.0",keyCode:{TAB:9,ENTER:13,ESCAPE:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},lang:{_get:function(g,f,e){return g[e]?g[e]:a.om.lang[f][e]}}});a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_oldFocus:a.fn.focus,focus:function(e,f){return typeof e==="number"?this.each(function(){var g=this;setTimeout(function(){a(g).focus();if(f){f.call(g)}},e)}):this._oldFocus.apply(this,arguments)},scrollParent:function(){var e;if((a.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){e=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(a.curCSS(this,"position",1))&&(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}else{e=this.parents().filter(function(){return(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!e.length?a(document):e},zIndex:function(h){if(h!==d){return this.css("zIndex",h)}if(this.length){var f=a(this[0]),e,g;while(f.length&&f[0]!==document){e=f.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){g=parseInt(f.css("zIndex"),10);if(!isNaN(g)&&g!==0){return g}}f=f.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".om-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".om-disableSelection")}});a.each(["Width","Height"],function(g,e){var f=e==="Width"?["Left","Right"]:["Top","Bottom"],h=e.toLowerCase(),k={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function j(m,l,i,n){a.each(f,function(){l-=parseFloat(a.curCSS(m,"padding"+this,true))||0;if(i){l-=parseFloat(a.curCSS(m,"border"+this+"Width",true))||0}if(n){l-=parseFloat(a.curCSS(m,"margin"+this,true))||0}});return l}a.fn["inner"+e]=function(i){if(i===d){return k["inner"+e].call(this)}return this.each(function(){a(this).css(h,j(this,i)+"px")})};a.fn["outer"+e]=function(i,l){if(typeof i!=="number"){return k["outer"+e].call(this,i)}return this.each(function(){a(this).css(h,j(this,i,true,l)+"px")})}});function c(g,e){var j=g.nodeName.toLowerCase();if("area"===j){var i=g.parentNode,h=i.name,f;if(!g.href||!h||i.nodeName.toLowerCase()!=="map"){return false}f=a("img[usemap=#"+h+"]")[0];return !!f&&b(f)}return(/input|select|textarea|button|object/.test(j)?!g.disabled:"a"==j?g.href||e:e)&&b(g)}function b(e){return !a(e).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.extend(a.expr[":"],{data:function(g,f,e){return !!a.data(g,e[3])},focusable:function(e){return c(e,!isNaN(a.attr(e,"tabindex")))},tabbable:function(g){var e=a.attr(g,"tabindex"),f=isNaN(e);return(f||e>=0)&&c(g,!f)}});a(function(){var e=document.body,f=e.appendChild(f=document.createElement("div"));a.extend(f.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=f.offsetHeight===100;a.support.selectstart="onselectstart" in f;e.removeChild(f).style.display="none"});a.extend(a.om,{plugin:{add:function(f,g,j){var h=a.om[f].prototype;for(var e in j){h.plugins[e]=h.plugins[e]||[];h.plugins[e].push([g,j[e]])}},call:function(e,g,f){var j=e.plugins[g];if(!j||!e.element[0].parentNode){return}for(var h=0;h<j.length;h++){if(e.options[j[h][0]]){j[h][1].apply(e.element,f)}}}}})})(jQuery);(function(a,c){if(a.cleanData){var b=a.cleanData;a.cleanData=function(d){for(var e=0,f;(f=d[e])!=null;e++){a(f).triggerHandler("om-remove")}b(d)}}a.omWidget=function(e,g,d){var f=e.split(".")[0],i;e=e.split(".")[1];i=f+"-"+e;if(!d){d=g;g=a.OMWidget}a.expr[":"][i]=function(j){return !!a.data(j,e)};a[f]=a[f]||{};a[f][e]=function(j,k){if(arguments.length){this._createWidget(j,k)}};var h=new g();h.options=a.extend(true,{},h.options);a[f][e].prototype=a.extend(true,h,{namespace:f,widgetName:e,widgetEventPrefix:a[f][e].prototype.widgetEventPrefix||e,widgetBaseClass:i},d);a.omWidget.bridge(e,a[f][e])};a.omWidget.bridge=function(e,d){a.fn[e]=function(h){var f=typeof h==="string",g=Array.prototype.slice.call(arguments,1),i=this;h=!f&&g.length?a.extend.apply(null,[true,h].concat(g)):h;if(f&&h.charAt(0)==="_"){return i}if(f){this.each(function(){var j=a.data(this,e);if(h=="options"){i=j&&j.options;return false}else{var k=j&&a.isFunction(j[h])?j[h].apply(j,g):j;if(k!==j&&k!==c){i=k;return false}}})}else{this.each(function(){var j=a.data(this,e);if(j){j._setOptions(h||{});a.extend(j.options,h);a(j.beforeInitListeners).each(function(){this.call(j)});j._init();a(j.initListeners).each(function(){this.call(j)})}else{a.data(this,e,new d(h,this))}})}return i}};a.omWidget.addCreateListener=function(e,f){var d=e.split(".");a[d[0]][d[1]].prototype.createListeners.push(f)};a.omWidget.addInitListener=function(e,f){var d=e.split(".");a[d[0]][d[1]].prototype.initListeners.push(f)};a.omWidget.addBeforeInitListener=function(e,f){var d=e.split(".");a[d[0]][d[1]].prototype.beforeInitListeners.push(f)};a.OMWidget=function(d,e){this.createListeners=[];this.initListeners=[];this.beforeInitListeners=[];if(arguments.length){this._createWidget(d,e)}};a.OMWidget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(e,f){a.data(f,this.widgetName,this);this.element=a(f);this.options=a.extend(true,{},this.options,this._getCreateOptions(),e);var d=this;this.element.bind("om-remove._"+this.widgetName,function(){d.destroy()});this._create();a(this.createListeners).each(function(){this.call(d)});this._trigger("create");a(this.beforeInitListeners).each(function(){this.call(d)});this._init();a(this.initListeners).each(function(){this.call(d)})},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName)},widget:function(){return this.element},option:function(e,f){var d=e;if(arguments.length===0){return a.extend({},this.options)}if(typeof e==="string"){if(f===c){return this.options[e]}d={};d[e]=f}this._setOptions(d);return this},_setOptions:function(e){var d=this;a.each(e,function(f,g){d._setOption(f,g)});return this},_setOption:function(d,e){this.options[d]=e;return this},_trigger:function(f,g){var k=this.options[f];g=a.Event(g);g.type=f;if(g.originalEvent){for(var e=a.event.props.length,j;e;){j=a.event.props[--e];g[j]=g.originalEvent[j]}}var d=[],h=arguments.length;for(var e=2;e<h;e++){d[e-2]=arguments[e]}if(h>1){d[h-2]=arguments[1]}return !(a.isFunction(k)&&k.apply(this.element,d)===false||g.isDefaultPrevented())}}})(jQuery);(function(d){var b=["collapse","min","max","close"],a=["om-panel-tool-collapse","om-panel-tool-expand","om-panel-tool-min","om-panel-tool-max","om-panel-tool-close"],c={anim:true,speed:"fast"};d.omWidget("om.omPanel",{options:{title:"",width:"auto",height:"auto",header:true,collapsible:false,closable:false,closed:false,collapsed:false,tools:[],loadingMessage:"default",_closeMode:"hidden",_helpMsg:false},_create:function(){this.element.addClass("om-panel-body om-widget-content").wrap("<div class='om-widget om-panel'></div>")},_init:function(){var g=this.options,h=this.element,i=h.parent(),f;this._renderHeader();f=h.prev();if(g.header===false){h.addClass("om-panel-noheader")}this._bindEvent();this._resize(i);var e=g.header!==false?f.outerHeight():0;if(g.collapsed!==false){"auto"!==g.height&&i.height(e);h.hide();if(g.header!==false){f.find(">.om-panel-tool >.om-panel-tool-collapse").removeClass("om-panel-tool-collapse").addClass("om-panel-tool-expand")}}else{h.show();"auto"!==g.height&&i.height(e+h.outerHeight());if(g.header!==false){f.find(">.om-panel-tool >.om-panel-tool-expand").removeClass("om-panel-tool-expand").addClass("om-panel-tool-collapse")}}g.closed!==false?this._hide(i):this._show(i);this.reload()},_hide:function(e){if("hidden"===this.options._closeMode){e.hide()}else{if("visibility"===this.options._closeMode){e.addClass("om-helper-hidden-accessible")}}},_show:function(e){if("hidden"===this.options._closeMode){e.show()}else{if("visibility"===this.options._closeMode){e.removeClass("om-helper-hidden-accessible")}}},_bindEvent:function(){var e=this,g=this.element,f=this.options,h=g.prev();if(f.collapsible!==false){h.click(function(i){if(d(i.target).is(".om-panel-icon,.om-panel-title,.om-panel-header")){f.collapsed!==false?e.expand():e.collapse()}}).find(".om-panel-tool-collapse , .om-panel-tool-expand").click(function(){f.collapsed!==false?e.expand():e.collapse()})}if(f.closable!==false){h.find(".om-panel-tool-close").click(function(i){e.close()})}},_renderHeader:function(){this.header&&this.header.remove();if(this.options.header===false){return}var h=this,n=this.options,g=n.tools,e=this.header=d("<div class='om-panel-header'></div>").insertBefore(this.element);if(n._helpMsg){e.parent().addClass("helpMsg")}if(n.iconCls){d("<div class='om-icon om-panel-icon'></div>").addClass(n.iconCls).appendTo(e)}d("<div class='om-panel-title'></div>").html(n.title).appendTo(e);$tool=d("<div class='om-panel-tool'></div>");if(n.collapsible!==false){d("<div class='om-icon om-panel-tool-collapse'></div>").appendTo($tool)}if(d.isArray(g)){for(var f=0,k=g.length;f<k;f++){var j=g[f],m;if(m=this._getInnerToolCls(j.id)){d("<div class='om-icon'></div>").addClass(m).click(function(i){j.handler.call(this,h,i)}).appendTo($tool)}else{if(typeof j.iconCls==="string"){d("<div class='om-icon'></div>").addClass(j.iconCls).click(function(i){j.handler.call(this,h,i)}).appendTo($tool)}else{if(d.isArray(j.iconCls)){(function(i){d("<div class='om-icon'></div>").addClass(i.iconCls[0]).click(function(o){i.handler.call(this,h,o)}).hover(function(){if(i.iconCls[1]){d(this).toggleClass(i.iconCls[1])}}).appendTo($tool)})(j)}}}}}else{try{d(g).appendTo($tool)}catch(l){throw"bad format of jquery selector."}}if(n.closable!==false){d("<div class='om-icon om-panel-tool-close'></div>").appendTo($tool)}$tool.find(">div.om-icon").hover(function(){var i=this;d.each(a,function(){if(d(i).hasClass(this)){d(i).toggleClass(this+"-hover")}})});$tool.appendTo(e)},_resize:function(i){var h=this.element,e=h.prev(),i=h.parent(),f=this.options;if(f.width=="fit"){f.width="100%";i.width("100%");e.css("width","");h.css("width","")}else{if(f.width!=="auto"){i.width(f.width);e.outerWidth(i.width());h.outerWidth(i.width())}else{var g=h.attr("style");if(g&&g.indexOf("width")!==-1){i.width(h.outerWidth());e.outerWidth(h.outerWidth())}else{i.css("width","");e.css("width","");h.css("width","")}}}if(f.height=="fit"){f.height="100%";i.height("100%");h.outerHeight(i.height()-(this.options.header!==false?e.outerHeight():0))}else{if(f.height!=="auto"){i.height(f.height);h.outerHeight(i.height()-(this.options.header!==false?e.outerHeight():0))}else{var g=h.attr("style");if(g&&g.indexOf("height")!==-1){i.height(e.outerHeight()+h.outerHeight())}else{i.css("height","");h.css("height","")}}}},_getInnerToolCls:function(e){return d.inArray(e,b)!=-1?"om-panel-tool-"+e:null},_showLoadingMessage:function(){var f=this.options,g=this.element,h=g.next(".om-panel-loadingMessage"),e={width:g.innerWidth(),height:g.innerHeight(),left:g.position().left+parseInt(g.css("border-left-width")),top:g.position().top};if(h.length===0){if("default"===f.loadingMessage){d("<div class='om-panel-loadingMessage'><div class='valignMiddle'><div class='loadingImg'>数据加载中</div></div></div>").css(e).appendTo(g.parent())}else{d("<div class='om-panel-loadingMessage'></div>").appendTo(g.parent()).html(f.loadingMessage).css(e)}}else{h.css(e).show()}},_hideLoadingMessage:function(){this.element.parent().find(".om-panel-loadingMessage").hide()},setTitle:function(e){this.element.prev().find(">.om-panel-title").html(e)},setIconClass:function(g){var f=this.element.prev();var e=f.find(">.om-panel-icon");if(g==null&&e.length!==0){e.remove()}else{if(e.length==0){e=d("<div class='om-icon om-panel-icon'></div>").insertBefore(f.find(">.om-panel-title"))}if(this.options.iconCls){e.removeClass(this.options.iconCls)}e.addClass(g);this.options.iconCls=g}},open:function(){var f=this.element,e=this.options;if(e.closed){if(e.onBeforeOpen&&this._trigger("onBeforeOpen")===false){return}this._show(f.parent());e.closed=false;e.onOpen&&this._trigger("onOpen")}},close:function(){var f=this.element,e=this.options;if(!e.closed){if(e.onBeforeClose&&this._trigger("onBeforeClose")===false){return}this._hide(f.parent());e.closed=true;e.onClose&&this._trigger("onClose")}},reload:function(g){var f=this.options,h=this.element,e=this;if(h.data("loading")){return}else{h.data("loading",true)}g=g||f.url;if(!g){h.data("loading",false);return}f.url=g;this._showLoadingMessage();d.ajax(g,{cache:false,success:function(j,k,i){h.html(f.preProcess?f.preProcess.call(h[0],j,k):j);h.data("loading",false);e._hideLoadingMessage();f.onSuccess&&e._trigger("onSuccess",null,j,k,i)},error:function(i,k,j){h.data("loading",false);e._hideLoadingMessage();f.onError&&e._trigger("onError",null,i,k,j)}})},resize:function(f){var g=this.options,h,e;if(d.isPlainObject(f)){h=f.width||null;e=f.height||null}else{h=arguments[0];e=arguments[1]}g.width=h||g.width;g.height=e||g.height;this._resize(this.element.parent())},collapse:function(){var l=this,i=this.element,e=i.prev(),h=i.parent(),k=i.next(".om-panel-loadingMessage"),m=this.options,g=c.anim,f=c.speed;if(arguments[0]!=undefined){g=arguments[0]}f=arguments[1]||f;if(m.onBeforeCollapse&&l._trigger("onBeforeCollapse")===false){return}h.stop(true,true);if(e.length!==0){var j=e.find("> .om-panel-tool > div.om-panel-tool-collapse");if(j.length!==0){j.removeClass("om-panel-tool-collapse").addClass("om-panel-tool-expand");if(j.hasClass("om-panel-tool-collapse-hover")){j.toggleClass("om-panel-tool-collapse-hover om-panel-tool-expand-hover")}}}h.animate({height:"-="+i.outerHeight()},g?(f||"normal"):0,function(){i.hide();k.hide();"auto"===m.height&&h.css("height","");m.onCollapse&&l._trigger("onCollapse")});m.collapsed=true},expand:function(){var l=this,i=this.element,e=i.prev(),h=i.parent(),k=i.next(".om-panel-loadingMessage"),m=this.options,g=c.anim,f=c.speed;if(arguments[0]!=undefined){g=arguments[0]}f=arguments[1]||f;if(m.onBeforeExpand&&l._trigger("onBeforeExpand")===false){return}h.stop(true,true);if(e.length!==0){var j=e.find("> .om-panel-tool > div.om-panel-tool-expand");if(j.length!==0){j.removeClass("om-panel-tool-expand").addClass("om-panel-tool-collapse");if(j.hasClass("om-panel-tool-expand-hover")){j.toggleClass("om-panel-tool-expand-hover om-panel-tool-collapse-hover")}}}"auto"===m.height&&h.height(e.outerHeight());i.show();if(i.data("loading")){k.show()}h.animate({height:"+="+i.outerHeight()},g?(f||"normal"):0,function(){"auto"===m.height&&h.css("height","");m.onExpand&&l._trigger("onExpand")});m.collapsed=false},destroy:function(){var e=this.element;e.parent().after(e).remove()}})})(jQuery);(function(){var f="om-tabs-"+(((1+Math.random())*65536)|0).toString(16).substring(1)+"-",e=0;var b="om-tabs-activated om-state-active",c="om-tabs-scroll-disabled";function a(h,g){if(g.content){$(h).html(g.content)}return $(h).omPanel(g)}function d(){return $.browser.msie&&parseInt($.browser.version)==7}$.omWidget("om.omTabs",{options:{width:"auto",height:"auto",border:true,tabWidth:"auto",tabHeight:27,scrollable:true,closable:false,position:"top",switchMode:"click",autoPlay:false,interval:1000,active:0,lazyLoad:false,tabMenu:false,onBeforeActivate:function(h,g){},onActivate:function(h,g){},onBeforeClose:function(h,g){},onClose:function(h,g){},onBeforeCloseAll:function(g){},onCloseAll:function(){},onAdd:function(g,h){},onBeforeAdd:function(g,h){},onLoadComplete:function(g,h){}},add:function(g){this._add(g)},close:function(g){this._close(g)},closeAll:function(){this._closeAll()},activate:function(g){this._activate(g)},getAlter:function(g){return this._getAlter(g)},getActivated:function(){return this._getActivated()},getLength:function(){return this._getLength()},setDataSource:function(g){if(g.index===undefined||(!g.url&&!g.content)){return}this._setDataSource(g)},reload:function(h,g,i){this._reload(h,g,i)},doLayout:function(){this._doLayout()},_create:function(){this._makeSketch();this._collectItems();this.history=[]},_init:function(){this._render();this._afterRender();this._buildEvent()},_makeSketch:function(){this.element.addClass("om-tabs om-widget om-widget-content om-corner-all").append('<div class="om-tabs-panels om-widget-content om-corner-bottom" />').find(">ul").wrap('<div class="om-tabs-headers om-helper-reset om-helper-clearfix om-widget-header om-corner-all" />');this.$menu=$("<div></div>").appendTo($("body"))},_collectItems:function(){var g=this,k=this.element,j=this.options,i=[],h=[];k.find(">div.om-tabs-headers a").each(function(){var m=this.getAttribute("href",2);var q=m.split("#")[0],s;if(q&&(q===location.toString().split("#")[0]||(s=$("base")[0])&&q===s.href)){m=this.hash;this.href=m}var o=$(this);var n=o.attr("tabId")||o.attr("id")||f+e++;o.attr("tabId",n);var l={tabId:n,title:o.text(),_closeMode:"visibility",header:false,closed:true,onSuccess:function(t,v,u){g._trigger("onLoadComplete",null,l.tabId)},onError:function(u,v,t){g._trigger("onLoadComplete",null,l.tabId)}};var r=$(">"+m,k)[0];if(!r&&m.indexOf("#")!=0){if(j.lazyLoad===false){l.url=m}else{h.push({tabId:n,url:m,loaded:false})}}var p=new a(r||$("<div></div>")[0],l);i.push(p)});$lis=k.find(">div.om-tabs-headers ul li");$('<span class="left-placeholder"></span>').insertBefore($lis.eq(0));$('<span class="right-placeholder"></span>').insertAfter($lis.eq($lis.length-1));if(h.length>0){this.loadInfo=h}this.items=i},_render:function(){var h=this,l=this.element,j=this.options,g=this.items,k=l.find(">div.om-tabs-headers");if(typeof j.active=="number"){if(j.active<0){j.active=0}if(j.active>g.length-1){j.active=g.length-1}}if(j.border!==false){l.children(":first").addClass("header-no-border")}if(j.width=="fit"){l.outerWidth(l.parent().width())}else{if(j.width!="auto"){l.css("width",j.width);var m=isNaN(j.width)&&j.width.indexOf("%")!=-1;l.children(":first").outerWidth(m?"100%":j.width)}}if(j.height=="fit"){l.outerHeight(l.parent().height())}else{if(j.height!="auto"){l.css("height",j.height)}}if(j.closable&&j.tabMenu&&$.fn.omMenu){var i=l.attr("id");this.menu=this.$menu.omMenu({contextMenu:true,dataSource:[{id:i+"_001",label:"关闭"},{id:i+"_002",label:"关闭其它"},{id:i+"_003",label:"关闭所有"}],onSelect:function(n,o){if(n.id==i+"_001"){h.close(h.getAlter($(h.$currentLi).find("a.om-tabs-inner").attr("tabid")))}else{if(n.id==i+"_002"){k.find("ul li").each(function(q,r){var p=$(h.$currentLi).find("a.om-tabs-inner").attr("tabid");var s=$(r).find("a.om-tabs-inner").attr("tabid");if(p===s){return}h.close(h.getAlter(s))})}else{if(n.id==i+"_003"){h.closeAll()}}}}})}this._renderHeader();this._renderBody()},_renderHeader:function(){var j=this.element,g=this.options,h=this.history;$headers=j.find(">div.om-tabs-headers"),$lis=$headers.find("ul li");$lis.addClass("om-state-default om-corner-top");$lis.each(function(l){var k=$(this).find("a:first");if(d()){k.attr("hideFocus","true")}k.addClass("om-tabs-inner");if(l===g.active||g.active===k.attr("tabId")){$(this).addClass(b);g.activeTabId=k.attr("tabId");g.active=l;if(!$.inArray(g.activeTabId,h)){h.push(g.activeTabId)}}else{$(this).removeClass(b)}k.css({width:g.tabWidth,height:g.tabHeight});$('<span class="lileft"></span>').insertBefore(k);if(g.closable===true||($.isArray(g.closable)&&-1!==$.inArray(l,g.closable))){if(k.next(".om-icon-close").length<=0){$('<a class="om-icon om-icon-close"></a>').insertAfter(k)}$('<span class="liright"></span>').insertAfter(k.next(".om-icon-close"))}else{k.next().remove();$('<span class="liright"></span>').insertAfter(k)}});var i=$lis.find("a.om-tabs-inner").height();$lis.parent().css({height:++i,"line-height":i+"px"});$headers.height(i);this._checkScroller()&&this._enableScroller()},_renderBody:function(){var n=this.element,j=this.options,h=this.items,m=n.find(">div.om-tabs-panels");m.children().detach();if(j.height!=="auto"){var g=n.innerHeight(),l=n.find(">div.om-tabs-headers").outerHeight();m.css("height",g-l)}n.toggleClass("om-tabs-noborder",!j.border);var k=h.length;while(k--){h[k].addClass("om-state-nobd").parent().prependTo(m)}},_afterRender:function(){var n=this.element,k=this.options,h=this.items;var l=h.length;n.children().each(function(){$(this).is(".om-tabs-headers,.om-tabs-panels")||$(this).remove()});if(!k.lazyLoad){$(h).omPanel("reload")}else{var g=$(h[k.active]);var m=g.omPanel("option","tabId");var j=this._getUnloadedUrl(m);g.omPanel("open");g.omPanel("reload",j);this._removeLoadInfo(m)}while(l--){var g=$(h[l]);if(l==k.active){g.omPanel("open")}else{g.omPanel("close")}}n.css("height",n.height());n.css("height",k.height)},_buildEvent:function(){var j=this,n=this.element,g=this.options,h=n.find(">div.om-tabs-headers a.om-icon-close");h.unbind("click.omtabs").bind("click.omtabs",function(p){var o=$(p.target).prev().attr("tabId");j._close(o);return false});var l=n.find(">div.om-tabs-headers a.om-tabs-inner");if(g.switchMode.indexOf("mouseover")!=-1){l.bind("mouseover.omtabs",function(){var o=$(this).attr("tabId"),p=$.data(n,"activateTimer");(typeof p!=="undefined")&&clearTimeout(p);p=setTimeout(function(){j._activate(o);return false},100);$.data(n,"activateTimer",p)})}else{if(g.switchMode.indexOf("click")!=-1){l.bind("click.omtabs",function(){j._activate($(this).attr("tabId"))})}}l.bind("click.omtabs",function(){return false});if(g.autoPlay!=false){g.autoInterId=setInterval(function(){n.omTabs("activate","next")},g.interval)}else{clearInterval(g.autoInterId)}if(g.switchMode.indexOf("mouseover")==-1){var i=n.find(">div.om-tabs-headers li");var k=function(p,o){if(o.is(":not(.om-state-disabled)")){o.addClass("om-state-"+p)}};var m=function(p,o){o.removeClass("om-state-"+p)};i.bind("mouseover.omtabs",function(){k("hover",$(this))});i.bind("mouseout.omtabs",function(){m("hover",$(this))});if(g.closable&&g.tabMenu){i.each(function(o,p){$(p).bind("contextmenu",function(q){if($.fn.omMenu){j.$currentLi=this;$(j.menu).omMenu("show",q)}})})}}n.find(">div.om-tabs-headers >span").bind("click.omtabs",function(o){if($(this).hasClass("om-tabs-scroll-disabled")){return false}var p=$(this).parent().find("ul").children("li:last").outerWidth(true);if($(this).hasClass("om-tabs-scroll-left")){j._scroll(p,j._scrollCbFn())}if($(this).hasClass("om-tabs-scroll-right")){j._scroll(-p,j._scrollCbFn())}return false})},_purgeEvent:function(){var i=this.element,g=this.options;var h=i.find(">div.om-tabs-headers");h.children().unbind(".omtabs");h.find(">ul >li >a").unbind(".omtabs");if(g.autoInterId){clearInterval(g.autoInterId)}},_activate:function(s){var x=this.element,j=this.options,r=this.items,k;var o=x.find(">div.om-tabs-headers ul");if(j.activeTabId===s||j.active===s){return false}s=s||0;var p,w=s;if(s=="next"){s=(j.active+1)%r.length}else{if(s=="prev"){s=(j.active-1)%r.length}}if(typeof s=="number"){w=this._getAlter(s)}else{if(typeof s=="string"){s=this._getAlter(s)}}if(j.onBeforeActivate&&this._trigger("onBeforeActivate",null,s)===false){return false}p=o.find("li a[tabId="+w+"]");p.parent().addClass(b).siblings().removeClass(b);j.activeTabId=w;j.active=s;var u=r.length;for(u=r.length;u--;u>=0){var h=r[u];if(h.omPanel("option","tabId")==w){h.omPanel("open");if(k=this._getUnloadedUrl(w)){h.omPanel("reload",k);this._removeLoadInfo(w)}}}for(u=r.length;u--;u>=0){var h=r[u];if(h.omPanel("option","tabId")!=w){h.omPanel("close")}}if(this._checkScroller()){o.stop(true,true);x.clearQueue();var q=o.prev();var z=o.next();var t=p.parent().offset().left;var v=t+p.parent().outerWidth(true);var m=q.offset().left+q.outerWidth(true)+4-t;var g=z.offset().left-v;if(m>=0){this._scroll(m,this._scrollCbFn())}else{if(g<=0){this._scroll(g,this._scrollCbFn())}else{this._scrollCbFn()()}}}var y=this.history,l=$.inArray(w,y);l===-1?y.push(w):y.push(y.splice(l,1)[0]);j.onActivate&&this._trigger("onActivate",null,s)},_getUnloadedUrl:function(h){var j=this.loadInfo;for(var g in j){if(j[g].tabId===h&&j[g].loaded===false){return j[g].url}}return null},_removeLoadInfo:function(j){var h=this.loadInfo,g,i;if(h){g=h.length;while(i=h[--g]){if(i.tabId===j){h.splice(g,1);break}}}},_addLoadInfo:function(h,g){this.loadInfo.push({tabId:h,loaded:false,url:g})},_getAlter:function(i){var h=this.element,g;if(typeof i=="number"){g=h.find(">div.om-tabs-headers li:eq("+i+") a.om-tabs-inner").attr("tabId")}else{if(typeof i=="string"){h.find(">div.om-tabs-headers li a.om-tabs-inner").each(function(j){if($(this).attr("tabId")==i){g=j;return false}})}}return g===undefined?null:g},_getActivated:function(){return this.options.activeTabId},_add:function(i){var m=this,o=this.element,q=this.options,l=this.items;var j=o.find(">div.om-tabs-headers ul");var h=i.tabId?i.tabId:f+e++;i.index=i.index||"last";if(i.index=="last"||i.index>l.length-1){i.index=l.length}i.title=i.title||"New Title "+h;i.url=$.trim(i.url);i.content=$.trim(i.content);if(i.url){i.content=undefined}else{i.url=undefined;i.content=i.content||"New Content "+h}if(q.onBeforeAdd&&m._trigger("onBeforeAdd",null,i)==false){return false}var n=$('<li class="om-state-default om-corner-top"> </li>');var p=$('<a class="om-tabs-inner"></a>').html(i.title).attr({href:"#"+h,tabId:h}).css({width:q.tabWidth,height:q.tabHeight}).appendTo(n);$('<span class="lileft"></span>').insertBefore(p);if(d()){p.attr("hideFocus","true")}if((i.closable===true)||(i.closable==undefined&&q.closable)){p.after('<a class="om-icon om-icon-close"></a>');$('<span class="liright"></span>').insertAfter(p.next(".om-icon-close"))}else{$('<span class="liright"></span>').insertAfter(p)}var k={tabId:h,title:p.text(),_closeMode:"visibility",header:false,closed:true,onSuccess:function(r,t,s){m._trigger("onLoadComplete",null,h)},onError:function(s,t,r){m._trigger("onLoadComplete",null,h)}};$.extend(k,i);if(i.url&&(q.lazyLoad||i.lazyLoad)){m.loadInfo.push({tabId:h,url:i.url,loaded:false});k.url=null}var g=new a($("<div>"+(i.content||"")+"</div>")[0],k);if(i.index==l.length){l[i.index]=g;n.insertBefore(j.find("span.right-placeholder"))}else{l.splice(i.index,0,g);j.children().eq(i.index).before(n)}if(j.innerWidth()-n.position().left<500){j.width(j.width()+500)}this._checkScroller()&&this._enableScroller();l[i.index].addClass("om-state-nobd").parent().insertAfter(i.index>0?o.find(">div.om-tabs-panels").children().eq(i.index-1):0);this._purgeEvent();this._buildEvent();this._trigger("onAdd",null,k);if(!(i.activateNew===false)){this._activate(i.index)}},_close:function(m){var p=this.element,q=this.options,n=this.items,o=p.find(">div.om-tabs-headers"),h=p.find(">div.om-tabs-panels"),k=p.height(),j=m,g=this.history;m=(m===undefined?q.active:m);if(typeof m=="string"){m=this._getAlter(m)}else{j=this._getAlter(m)}if(q.onBeforeClose&&this._trigger("onBeforeClose",null,m)==false){return false}this._removeLoadInfo(this._getAlter(m));o.find("li").eq(m).remove();h.children().find(">.om-panel-body").eq(m).empty().remove();n.splice(m,1);if(h.children().length==0){h.css({height:k-o.outerHeight()})}for(var l=g.length-1;l>=0;l--){if(j===g[l]){g.splice(l,1);break}}q.onClose&&this._trigger("onClose",null,m);if(n.length==0){q.active=-1;q.activeTabId=null;return}else{if(m==q.active){q.active=-1;this._activate(g.length>0?g.pop():0)}else{m<q.active&&q.active--;this._checkScroller()&&this._enableScroller()}}},_closeAll:function(){var o=this.element,k=this.options,j=this.items,n=o.find(">div.om-tabs-headers"),m=o.find(">div.om-tabs-panels"),h=o.height();if(k.onBeforeCloseAll&&this._trigger("onBeforeCloseAll")===false){return false}for(var l=0,g=j.length;l<g;l++){this._removeLoadInfo(j[l].omPanel("option","tabId"))}n.find("li").remove();m.empty();j.splice(0,j.length);m.css({height:h-n.outerHeight()});k.active=-1;k.activeTabId=null;this.history=[];k.onCloseAll&&this._trigger("onCloseAll")},_checkScroller:function(){var l=this.element,k=this.options;if(!k.scrollable){return false}var j=l.find(">div.om-tabs-headers ul");var h=4;j.children().each(function(){h+=$(this).outerWidth(true)});if(h>j.parent().innerWidth()){if(!j.hasClass("om-tabs-scrollable")){var m=$("<span></span>").insertBefore(j).addClass("om-tabs-scroll-left");var i=$("<span></span>").insertAfter(j).addClass("om-tabs-scroll-right");var g=(j.height()-m.height())/2;j.addClass("om-tabs-scrollable")}return true}else{j.removeClass("om-tabs-scrollable").siblings().remove();return false}},_scrollCbFn:function(){var g=this;return function(){g._enableScroller()}},_enableScroller:function(){var n=this.element.find(">div.om-tabs-headers"),l=n.children("ul"),o=l.prev(),j=l.next(),m=l.children(":last"),g=n.offset().left,k=j.offset().left,h=l.offset().left,i=m.offset().left+m.outerWidth(true);o.toggleClass(c+" om-tabs-scroll-disabled-left",h>=g);j.toggleClass(c+" om-tabs-scroll-disabled-right",i<=k)},_scroll:function(k,i){var g=this;$self=this.element,$ul=$self.find(">div.om-tabs-headers ul"),$li=$ul.children(":last");if(k==0){return}var h=k>0?$ul.prev().offset():$ul.next().offset();var j=function(m){if(k>0&&$ul.prev().hasClass(c)||k<0&&$ul.next().hasClass(c)){$ul.stop(true,true);$self.clearQueue();return}var l=false;k=(k>0)?"+="+Math.min(h.left-$ul.offset().left,k):"-="+Math.min($li.offset().left+$li.outerWidth(true)-h.left,Math.abs(k));g.isScrolling=true;$ul.animate({left:k+"px"},"normal","swing",function(){!!i&&i();g.isScrolling=false;m()})};$self.queue(j);if($self.queue().length==1&&!g.isScrolling){$self.dequeue()}},_getLength:function(){return this.items.length},_doLayout:function(){this._checkScroller()&&this._enableScroller()},_setDataSource:function(j){var k=this.element,g=this.items,i=this.options,h=this._getAlter(j.index);j.url=$.trim(j.url);j.content=$.trim(j.content);if(j.url){if(i.lazyLoad!==false){this._addLoadInfo(h,j.url);g[j.index].omPanel("option","url",j.url)}else{this._removeLoadInfo(h);g[j.index].omPanel("reload",j.url)}}else{g[j.index].html(j.content)}},_reload:function(j,i,k){var l=this.element,g=this.items,h=this._getAlter(j);if(i){this._removeLoadInfo(h);g[j].omPanel("reload",i)}else{if(k){g[j].html(k)}else{g[j].omPanel("reload",this._getUnloadedUrl(h));this._removeLoadInfo(h)}}}})})(jQuery);